import * as React from 'react'
import type {TinaTemplate} from "tinacms";
import { TinaMarkdown } from "tinacms/dist/rich-text";

export const TextAndImage = ({data, parentField}) => {
    return (
        <div className={`${data.bgColor} py-20`}>
            <div className="max-w-screen-xl mx-auto px-5 lg:px-16 ">
                <div className={`flex flex-col xl:flex-row justify-items-start relative ${data.image_position === 'right' ? 'xl:flex-row-reverse': ''}`}>
                    {data.image.src &&
                      <div className="xl:w-5/12 relative">
                        <div className="w-full">
                          <div className="relative z-10">
                            <img src={data.image.src} alt={data.image.alt}/>
                          </div>
                        </div>
                          {data.showIllustrations &&
                            <div className="absolute z-20 -bottom-12 right-0 hidden lg:block">
                              <svg width="184" height="183" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                  d="M166.374 45.364c-.351-.225-3.264-.554-1.759-.58 1.391-.024 2.453.27 3.666.8 1.231.54 2.408 1.224 3.315 2.297 1.134 1.103.167.559-2.901-1.635.208.057.42.1.636.127l-2.626-.366c3.4.392 6.689.978 9.181 3.77 3.453 3.87 4.61 9.546 1.919 14.26-2.884 5.055-9.169 6.619-14.07 3.827-1.994-1.135-2.85-2.497-4.189-4.31.551.739 1.102 1.48 1.655 2.22-3.075-2.958-4.981-7.645-4.421-11.975.053-.405.545-4.152.127-.431.099-.875.208-1.982.405-2.918.339-1.632 1.041-2.891 2.095-4.154 1.618-1.937 4.918-2.247 6.967-.932ZM147.224 65.217c.45 2.074 1.588 3.24 2.874 4.75 2.361 2.773 4.579 5.882 4.518 9.764-.074 4.586-4.742 9.252-9.384 7.415-4.511-1.783-7.013-5.684-7.757-10.566-.569-3.744-.98-7.73.339-11.363 1.565-4.305 8.259-5.287 9.41 0ZM171.898 96.559c1.488 1.614 3.211 2.895 4.786 4.398 4.248 4.047 4.24 11.924-1.581 14.472-5.288 2.316-10.341-1.861-11.41-7.215-.505-2.525-.951-5.06-1.151-7.635-.387-4.977 6.223-7.412 9.356-4.02Z"
                                  fill="#fff"/>
                                <path
                                  d="M174.747 120.929c.31 1.088-.623-.893.05.142.096.144.729 1.223.269.504-.454-.715.281.318.407.456.317.353.653.69.999 1.01 1.915 1.779 4.309 4.65 3.971 7.552-.329 2.831-1.725 5.598-4.642 6.326-8.391 2.086-12.359-9.176-10.85-15.99 1.155-5.221 8.429-4.805 9.796 0ZM153.799 141.723c.21.9-.533-.691-.131-.172.131.167.318.487.395.687.248.634-.798-.892-.074-.079.241.271.47.552.716.82 1.261 1.379 2.639 2.536 3.601 4.201 2.444 4.228.498 9.756-3.777 11.626-2.036.891-4.053.891-6.089 0-2.442-1.069-3.586-2.848-4.574-5.311-.723-1.799-.73-4.449-.73-6.448 0-2.304.355-4.526 1.379-6.584 1.998-4.01 8.278-3.043 9.284 1.26ZM124.825 125.33c.191 1.011.573.343-.292-.505.181.178.299.625.417.845.172.321.357.636.549.945.169.273 1.221 1.707.263.469-.951-1.231.109.105.318.332.231.255.546.478.745.753-1.165-1.589-1.742-1.294-.855-.751.889.543 1.808 1.16 2.476 1.991 2.584 3.203 3.82 7.899 1.457 11.7-2.266 3.647-6.383 5.547-10.513 4.437-5.744-1.544-7.939-7.5-7.782-13.067.082-2.894.464-6.116 1.856-8.689 2.49-4.593 10.32-3.996 11.361 1.54ZM149.686 112.974c.361 1.354-.565-.868-.167-.266.188.282.33.602.516.887.379.586.813 1.133 1.206 1.708 2.163 3.173 2.434 7.115.578 10.53-2.239 4.124-8.797 5.518-11.951 1.597-1.613-2.002-2.452-3.852-2.716-6.476-.042-.42-.067-.832-.089-1.254-.068-1.333.228 1.63.095.642-.347-2.597-.578-4.774.026-7.368.641-2.752 3.491-5.065 6.25-4.938 2.863.135 5.467 1.995 6.252 4.938ZM120.624 83.5c.19.665.319 1.4.575 2.035l.336.532c-.203-.31-.164-.287.12.065.282.33.554.673.844.995.21.24.429.47.657.69-1.007-.716-1.173-.885-.498-.505 5.586 2.893 5.021 11.56 0 14.606-5.596 3.397-11.892-1.027-12.27-7.302-.236-3.954 1.881-7.507 3.019-11.117 1.135-3.604 6.148-3.772 7.217 0ZM107.738 31.777c1.303.593 2.369 1.487 3.476 2.41.309.26.992 1.117 1.364 1.18l-.683-.53c.217.165.437.327.66.486 1.543 1.135 3.048 2.243 4.089 3.92 1.572 2.53 1.643 6.464.07 8.915-1.59 2.476-5.034 4.623-8.02 3.385-1.313-.544-2.434-.98-3.477-2.061-1.257-1.713-1.538-2.083-.843-1.114.705.983.414.597-.876-1.154-.609-1.2-.956-2.552-1.372-3.835-.261-.805-.461-1.618-.665-2.44a37.188 37.188 0 0 0-.406-1.478c-.325-1.104.352.609-.267-.476-1.146-2.01-.792-4.737.794-6.384 1.719-1.78 4.061-1.778 6.156-.823ZM77.065 21.076c-1.504-1.363.772.539 1.075.779-1.413-1.118-.098-.158.237.028.823.456 1.65.89 2.46 1.371 4.296 2.557 7.208 6.427 7.426 11.747.217 5.344-4.114 9.883-8.99 10.563-4.536.63-10.687-2.401-11.375-7.704-.141-1.095-.284-2.191-.427-3.286.038-.228.049-.459.033-.687-.028-.815.041-.317.21 1.494-.094-.61-.177-1.22-.247-1.834-.111-.848-.23-1.7-.317-2.551-.133-1.326.361 2.305.039.428-.755-4.404-.634-8.573 3.396-11.215 2.108-1.38 4.724-.726 6.48.867ZM81.834 71.151c.16.388.334.751.545 1.114.12.205.249.404.383.599.281.41.178.275-.305-.407.122.6 1.527 1.658 1.909 2.095.988 1.13 2.026 2.145 2.839 3.444 1.086 1.74 1.355 3.566 1.431 5.578.108 2.91-2.278 6.697-5.251 7.153-3.248.498-6.06.25-8.6-2.166-1.748-1.662-2.692-3.866-3.41-6.164-.918-2.95-.823-6.89.076-9.84.69-2.26 2.437-3.901 4.723-4.219 2.018-.283 4.779.688 5.66 2.813ZM71.104 108.834c1.14 2.887 3.605 5.149 5.409 7.59 3.537 4.784 4.506 10.568.412 15.363-2.978 3.486-7.734 2.507-10.83 0-3.249-2.633-3.386-7.55-4.175-11.411-.816-3.994-.577-7.723.806-11.542 1.577-4.355 6.735-4.159 8.378 0ZM95.386 145.89c.601 1.476-.304-.038.262.676.267.34 1.193 1.003.413.419 1.266.945 2.583 1.831 3.696 2.977 2.482 2.552 4.674 6.886 4.242 10.582-.616 5.249-4.257 8.495-9.457 7.472-4.884-.96-7.377-5.941-8.771-10.383-1.034-3.29-1.68-7.015-.523-10.37.748-2.177 2.309-3.837 4.61-4.121 1.97-.243 4.67.647 5.528 2.748ZM63.893 160.418c.512.541.828 1.222 1.28 1.788-.48-.6.767.646.738.622.975.876 1.367 1.018 2.65 2.139 2.438 2.127 4.423 4.389 5.434 7.604 1.37 4.349-1.934 8.851-6.054 9.426-3.943.548-8.699-2.807-8.25-7.42.135-1.381.576.728-.024-.535.803 1.688-1.186-2.829-.687-1.728.386.854.088.187-.176-.258-.313-.528-.652-1.037-.984-1.555-1.773-2.774-2.999-5.907-1.38-9.086 1.428-2.803 5.386-3.188 7.453-.997ZM39.99 161.543c.065.265.255.87.011.294.023.055.877 1.332.43.761-.433-.553.33.316.416.399.336.333.663.676 1 1.009 1.587 1.573 3.029 3.228 4.23 5.154 1.578 2.537 1.659 6.574 0 9.102-.084.126-.168.252-.25.379-2.334 3.556-7.504 5.95-11.337 3.083-3.316-2.476-4.352-4.773-4.569-8.873.006-.28-.001-.56-.026-.842-.087-.885-.064-.732.069.466.128-.408-.232-1.361-.294-1.762-.589-3.791-.553-6.87.914-10.445 1.79-4.364 8.38-2.826 9.406 1.275ZM14.822 145.162c.94 1 1.862 2.015 2.87 2.94.52.479 1.695 1.117-.31-.181.28.181.537.403.82.585.77.492 1.543 1.023 2.216 1.659.545.61 1.04 1.262 1.488 1.956-.978-1.291-1.217-1.629-.718-1.014 2.224 2.698 3.237 6.752 1.24 9.965-1.966 3.162-5.4 4.632-8.953 3.779-6.104-1.463-7.75-7.951-9.04-13.417-.634-2.68.392-5.93 2.856-7.281 2.428-1.329 5.55-1.101 7.531 1.009ZM43.018 133.889c.18.185.36.351.559.516l-1.315-1.053c.493.376 1.022.636 1.561.928 1.312.705 2.986 2.428 3.759 3.741 2.134 3.627 1.488 8.585-2.155 10.854-3.564 2.221-7.867.753-10.356-2.363-1.127-1.412-1.936-2.932-2.247-4.722-.192-1.101-.394-2.266-.302-3.392.206-2.596 1.377-4.778 3.779-5.828a6.01 6.01 0 0 1 6.717 1.319ZM47.435 1.734c3.509 3.464 7.916 6.45 9.353 11.53 2.003 7.078-6.147 14.014-12.337 9.836-3.423-2.31-4.431-5.117-5.242-8.993-.451-2.156-1.204-4.23-1.716-6.37-1.433-6.01 5.61-10.285 9.942-6.003Z"
                                  fill="#fff"/>
                              </svg>
                            </div>
                          }
                      </div>
                    }
                    <div className=
                             {`${data.image.src ?? 'xl:w-7/12'} ${ data.image.src ? data.image_position === 'right' ? 'xl:mr-8' : 'xl:ml-8' : 'mx-auto text-center'} pt-6`}>
                        <h3 className="font-serif text-4xl lg:text-5xl text-gray-700 mb-12">{data.title}</h3>
                        <div className="richtext lg:richtext-lg">
                            <TinaMarkdown content={data.body} />
                        </div>
                        {data.link.url &&
                          <a href={data.link.url} className="inline-block pt-4 text-interaction-default">
                            <span className="inline">{data.link.label}</span>
                            <svg className="inline w-10" viewBox="0 0 37 36" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                              <path d="M9 17.8969H27.5101M27.5101 17.8969L23.4938 14M27.5101 17.8969L23.4938 21.7938"
                                    stroke="#FF922D" stroke-width="1.5" stroke-linecap="square"/>
                            </svg>
                          </a>
                        }
                    </div>
                </div>
            </div>
        </div>
    )
}


export const textAndImageBlockSchema: TinaTemplate = {
    name: "textAndImage",
    label: "Text and image",
    ui: {
        previewSrc: "/blocks/text-and-image.png",
        itemProps: (item) => {
            return { label: item?.title };
        },
        defaultItem: {
            title: "title",
            bgColor: "bg-secondary",
            showIllustrations: "false",
            body: "",
            image: {
                src: "http://via.placeholder.com/400x400",
                alt: ""
            },
            image_position: "left",
            link: {
                url: "",
                label: "Read more"
            },
        }
    },
    fields: [
        {
            type: "boolean",
            label: "Afficher les illustrations",
            name: "showIllustrations",
            ui: {
                component: "toggle"
            }
        },
        {
            type: "string",
            label: "Couleur de fond",
            name: "bgColor",
            options: [{
                value: "bg-secondary",
                label: "Bleu clair"
            },{
                value: "white",
                label: "Blanc"
            }]
        },
        {
            type: "string",
            label: "Title",
            name: "title",
        },
        {
            type: "rich-text",
            label: "Text",
            name: "body",
        },
        {
            type: "object",
            label: "Image",
            name: "image",
            fields: [
                {
                    name: "src",
                    label: "Image Source",
                    type: "image",
                },
                {
                    name: "alt",
                    label: "Alt Text",
                    type: "string",
                }
            ],
        },
        {
            name: "image_position",
            label: "Position de l'image",
            type: "string",
            options: [{
                value: "left",
                label: "Gauche"
            }, {
                value: "right",
                label: "Droite"
            }]
        },
        {
            type: "object",
            label: "Link",
            name: "link",
            fields: [
                {
                    name: "label",
                    label: "Label",
                    type: "string",
                },
                {
                    name: "url",
                    label: "URL",
                    type: "string",
                },
            ],
        },
    ]
}
